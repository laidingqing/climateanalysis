#get and build redis-ml
git clone https://github.com/RedisLabsModules/redis-ml.git
cd redis-ml/src
make 

#get and build jedis
git clone https://github.com/xetorthio/jedis.git
cd jedis
mvn package -Dmaven.test.skip=true

#get and build spark-jedis-ml
cd.. 
git clone https://github.com/RedisLabs/spark-redis-ml.git
mvn install:install-file -Dfile=jedis-3.0.0-SNAPSHOT.jar -DgroupId=redis.clients -DartifactId=jedis -Dversion=3.0.0-SNAPSHOT -Dpackaging=jar

#redis.conf
loadmodule /root/redis-ml/src/redis-ml.so

#redis-ml makefile
redis-ml.so: rmutil/librmutil.a redis-ml.o $(OBJS)
	$(LD) -o $@ -lrt redis-ml.o $(OBJS)  $(SHOBJ_LDFLAGS)   -l:libcblas.a -l:libatlas.a $(LIBS) -L$(RMUTIL_LIBDIR) -lrmutil -lc
	

#add Random Forest Model to Redis ML
ML.FOREST.ADD rfregression 0 . numeric 1 -103.1313 .l numeric 3 3.0 .ll numeric 0 38.66667 .lll numeric 1 -124.1333 .llll numeric 2 1952.0 .lllll leaf 120.63551214707813 .llllr leaf 120.44238843671064 .lllr numeric 0 34.583 .lllrl leaf 110.42648824727769 .lllrr leaf 104.47824071533114 .llr numeric 3 2.0 .llrl numeric 3 1.0 .llrll leaf 94.59712327671129 .llrlr leaf 96.8255685168505 .llrr numeric 2 2014.0 .llrrl leaf 100.43633829632704 .llrrr leaf 102.60877960339943 .lr numeric 1 -124.1333 .lrl numeric 3 10.0 .lrll numeric 3 4.0 .lrlll leaf 104.77545551601423 .lrllr leaf 111.83092903865962 .lrlr numeric 2 1943.0 .lrlrl leaf 104.06079635949943 .lrlrr leaf 97.26103954890445 .lrr numeric 3 10.0 .lrrl numeric 0 37.2 .lrrll leaf 120.19560024363008 .lrrlr leaf 113.22206371116994 .lrrr numeric 1 -117.1756 .lrrrl leaf 103.90285084330964 .lrrrr leaf 99.62152603725458 .r numeric 3 3.0 .rl numeric 0 37.2 .rll numeric 1 -74.3539 .rlll numeric 1 -83.083333 .rllll leaf 109.59134797963583 .rlllr leaf 110.58645388090034 .rllr numeric 2 1996.0 .rllrl leaf 119.52402657688526 .rllrr leaf 121.68047953528348 .rlr numeric 0 43.93 .rlrl numeric 0 40.58333 .rlrll leaf 102.14093911062014 .rlrlr leaf 97.95314542967196 .rlrr numeric 1 87.7 .rlrrl leaf 92.91400729242666 .rlrrr leaf 80.53977029302796 .rr numeric 3 10.0 .rrl numeric 1 -74.3539 .rrll numeric 3 4.0 .rrlll leaf 111.80605155034439 .rrllr leaf 119.84739634846753 .rrlr numeric 1 35.383 .rrlrl leaf 113.64215618746772 .rrlrr leaf 114.81828509848185 .rrr numeric 3 11.0 .rrrl numeric 2 1999.0 .rrrll leaf 106.08458767869789 .rrrlr leaf 107.47388484318866 .rrrr numeric 0 35.4322 .rrrrl leaf 114.31704332965886 .rrrrr leaf 96.2065376801892
ML.FOREST.ADD rfregression 1 . numeric 3 3.0 .l numeric 1 143.732 .ll numeric 1 87.7 .lll numeric 3 2.0 .llll numeric 3 1.0 .lllll leaf 98.14199803048669 .llllr leaf 99.79463575601605 .lllr numeric 1 -79.5963 .lllrl leaf 104.78176139493543 .lllrr leaf 102.13370132759935 .llr numeric 2 2011.0 .llrl numeric 3 2.0 .llrll leaf 103.61198923848256 .llrlr leaf 107.81731073402948 .llrr numeric 2 2014.0 .llrrl leaf 111.53152388319474 .llrrr leaf 121.32043870566272 .lr numeric 2 1994.0 .lrl numeric 2 1930.0 .lrll numeric 0 15.13333 .lrlll leaf 123.75441510430419 .lrllr leaf 84.56050847457631 .lrlr numeric 0 27.96667 .lrlrl leaf 121.44184833520009 .lrlrr leaf 82.59306958202464 .lrr numeric 3 2.0 .lrrl numeric 2 2014.0 .lrrll leaf 118.38416896869245 .lrrlr leaf 122.58618317061828 .lrrr numeric 0 27.96667 .lrrrl leaf 120.63894537768383 .lrrrr leaf 86.03063437139558 .r numeric 3 10.0 .rl numeric 3 4.0 .rll numeric 2 1964.0 .rlll numeric 2 1915.0 .rllll leaf 110.52147900811032 .rlllr leaf 109.95037334289044 .rllr numeric 1 -103.1313 .rllrl leaf 107.31781348196309 .rllrr leaf 110.57292340079124 .rlr numeric 3 9.0 .rlrl numeric 0 43.2433 .rlrll leaf 120.94622476792836 .rlrlr leaf 114.42748047230458 .rlrr numeric 1 -103.1313 .rlrrl leaf 109.50363588700822 .rlrrr leaf 112.24494549823211 .rr numeric 0 36.2599 .rrl numeric 0 27.96667 .rrll numeric 0 -29.5407 .rrlll leaf 118.31412979715881 .rrllr leaf 123.03041643445134 .rrlr numeric 3 11.0 .rrlrl leaf 111.9555639851485 .rrlrr leaf 107.78887237033628 .rrr numeric 1 87.7 .rrrl numeric 3 11.0 .rrrll leaf 102.02451454069109 .rrrlr leaf 96.5841871938852 .rrrr numeric 2 1948.0 .rrrrl leaf 81.95890634441088 .rrrrr leaf 86.3828690942715
ML.FOREST.ADD rfregression 2 . numeric 0 38.66667 .l numeric 3 3.0 .ll numeric 0 27.96667 .lll numeric 0 15.13333 .llll numeric 0 -29.5407 .lllll leaf 120.37097856585672 .llllr leaf 126.74560092158937 .lllr numeric 3 2.0 .lllrl leaf 118.59380530520279 .lllrr leaf 121.02430617880566 .llr numeric 3 2.0 .llrl numeric 0 34.583 .llrll leaf 109.1518576252981 .llrlr leaf 103.26042927186845 .llrr numeric 1 -100.4792 .llrrl leaf 109.29300623710657 .llrrr leaf 111.31485922345139 .lr numeric 0 34.583 .lrl numeric 3 10.0 .lrll numeric 1 123.8653 .lrlll leaf 123.03300914031193 .lrllr leaf 115.71978682417432 .lrlr numeric 1 -77.1134 .lrlrl leaf 112.60664759791948 .lrlrr leaf 120.68328836283061 .lrr numeric 3 10.0 .lrrl numeric 3 5.0 .lrrll leaf 115.20975273056004 .lrrlr leaf 121.02532049619833 .lrrr numeric 3 11.0 .lrrrl leaf 108.24906070623591 .lrrrr leaf 103.50019705034545 .r numeric 3 3.0 .rl numeric 1 87.7 .rll numeric 3 2.0 .rlll numeric 3 1.0 .rllll leaf 93.70600871787553 .rlllr leaf 95.31306043948027 .rllr numeric 1 18.37 .rllrl leaf 100.32211670050529 .rllrr leaf 96.51649082265945 .rlr numeric 3 2.0 .rlrl numeric 0 48.9333 .rlrll leaf 89.17041139454632 .rlrlr leaf 75.5430655080623 .rlrr numeric 0 59.36667 .rlrrl leaf 92.63550714886459 .rlrrr leaf 78.53534838076546 .rr numeric 0 50.1 .rrl numeric 1 -103.1313 .rrll numeric 3 10.0 .rrlll leaf 113.48669808989993 .rrllr leaf 100.03014115886495 .rrlr numeric 3 10.0 .rrlrl leaf 115.46084899056947 .rrlrr leaf 99.58675930896976 .rrr numeric 1 87.7 .rrrl numeric 0 63.3337 .rrrll leaf 107.40076217599021 .rrrlr leaf 101.04567386829008 .rrrr numeric 1 123.8653 .rrrrl leaf 101.25437056497094 .rrrrr leaf 99.74070359019264
ML.FOREST.ADD rfregression 3 . numeric 3 3.0 .l numeric 1 143.732 .ll numeric 0 37.2 .lll numeric 3 2.0 .llll numeric 0 27.96667 .lllll leaf 121.92025417598316 .llllr leaf 107.04496706727016 .lllr numeric 1 -74.3539 .lllrl leaf 112.63879227295283 .lllrr leaf 120.05071562342432 .llr numeric 3 2.0 .llrl numeric 0 43.93 .llrll leaf 98.3450381477462 .llrlr leaf 91.6065621022353 .llrr numeric 0 50.1 .llrrl leaf 101.97881267597197 .llrrr leaf 94.08249228762577 .lr numeric 2 1996.0 .lrl numeric 2 1930.0 .lrll numeric 3 2.0 .lrlll leaf 122.22906735751295 .lrllr leaf 120.60364535768646 .lrlr numeric 2 1961.0 .lrlrl leaf 109.80510589318601 .lrlrr leaf 115.73235064841326 .lrr numeric 2 2014.0 .lrrl numeric 3 2.0 .lrrll leaf 118.47633348076073 .lrrlr leaf 117.17908915228034 .lrrr leaf 121.48659319899244 .r numeric 1 -103.1313 .rl numeric 3 10.0 .rll numeric 3 5.0 .rlll numeric 3 4.0 .rllll leaf 107.76568679621465 .rlllr leaf 112.35704271280487 .rllr numeric 0 37.2 .rllrl leaf 121.9698182253824 .rllrr leaf 114.39732385190175 .rlr numeric 3 11.0 .rlrl numeric 1 -114.4833 .rlrll leaf 104.05266133993138 .rlrlr leaf 101.81425592911128 .rlrr numeric 1 -114.4833 .rlrrl leaf 100.51908190800398 .rlrrr leaf 96.67091749938062 .rr numeric 3 10.0 .rrl numeric 3 4.0 .rrll numeric 2 2004.0 .rrlll leaf 110.46145638645473 .rrllr leaf 111.55722841867293 .rrlr numeric 3 9.0 .rrlrl leaf 118.97076984965118 .rrlrr leaf 112.2348736632991 .rrr numeric 0 36.2599 .rrrl numeric 3 11.0 .rrrll leaf 115.94474448462279 .rrrlr leaf 113.416874754716 .rrrr numeric 0 43.93 .rrrrl leaf 102.71123410360174 .rrrrr leaf 95.03711345301258
ML.FOREST.ADD rfregression 4 . numeric 3 3.0 .l numeric 1 143.732 .ll numeric 0 37.2 .lll numeric 3 2.0 .llll numeric 1 -74.3539 .lllll leaf 108.23589909072368 .llllr leaf 119.15085526733337 .lllr numeric 1 -74.3539 .lllrl leaf 112.62847524802336 .lllrr leaf 120.1412240824327 .llr numeric 3 2.0 .llrl numeric 3 1.0 .llrll leaf 93.78107432700084 .llrlr leaf 95.46595424026927 .llrr numeric 1 35.383 .llrrl leaf 100.75693165257942 .llrrr leaf 93.12447314144285 .lr numeric 2 1996.0 .lrl numeric 2 1930.0 .lrll numeric 2 1905.0 .lrlll leaf 122.83042269187987 .lrllr leaf 120.86757268722467 .lrlr numeric 0 27.96667 .lrlrl leaf 121.44695529389239 .lrlrr leaf 82.39151522220928 .lrr numeric 2 2014.0 .lrrl numeric 3 2.0 .lrrll leaf 118.34382665317992 .lrrlr leaf 117.04175847457627 .lrrr numeric 0 27.96667 .lrrrl leaf 122.57844716494844 .lrrrr leaf 84.00135593220317 .r numeric 3 10.0 .rl numeric 1 -74.3539 .rll numeric 1 -103.1313 .rlll numeric 3 5.0 .rllll leaf 110.0861212911447 .rlllr leaf 116.02428349721943 .rllr numeric 3 4.0 .rllrl leaf 111.79635071889592 .rllrr leaf 119.83577206200073 .rlr numeric 3 4.0 .rlrl numeric 0 39.9355 .rlrll leaf 119.1848151267482 .rlrlr leaf 103.82684654861367 .rlrr numeric 0 46.8127 .rlrrl leaf 117.7414408853135 .rlrrr leaf 111.19130733662632 .rr numeric 0 36.2599 .rrl numeric 0 27.96667 .rrll numeric 2 2001.0 .rrlll leaf 121.20138371101365 .rrllr leaf 122.04430479321378 .rrlr numeric 3 11.0 .rrlrl leaf 111.95894668850634 .rrlrr leaf 107.80122300143744 .rrr numeric 0 50.1 .rrrl numeric 3 11.0 .rrrll leaf 103.37098564642403 .rrrlr leaf 97.7447226797807 .rrrr numeric 3 11.0 .rrrrl leaf 94.84622369525574 .rrrrr leaf 89.54590066288789

#predict the score
ML.FOREST.RUN rfregression 0:17.13333,1:-61.78333,2:2000,3:03 REGRESSION
	

